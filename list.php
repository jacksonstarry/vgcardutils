<?phpinclude plugin_dir_path(__FILE__).'includes/class-vgcards-list-table.php';function vg_card_list_page() {	if ( isset($_REQUEST['card']) ) {		vg_card_view_page($_REQUEST['card']);		return;	}	$table = new VgCards_List_Table();		if(isset($_POST['data']) && isset($_POST['data']['Query'])) {		$table->prepare_item($_POST['data']['Query']);	} else { 		$table->prepare_items();	}	?><div class="wrap">	<div id="icon-users" class="icon32">		<br />	</div>	<h2>カード検索</h2>	<div id="VGCardQuery">		<form action="" id="QueryIndexForm" method="post"			accept-charset="utf-8">			<div style="display: none;">				<input type="hidden" name="_method" value="POST" />			</div>			<div class="input text">				<label for="QueryKeyword"  class="VGFieldNameLabel">Keyword</label><input					name="data[Query][keyword]" type="text" id="QueryKeyword" />			</div>			<div class="input select">				<label for="QueryVgUnitId"  class="VGFieldNameLabel">单位类型</label><select					name="data[Query][unit_id]" id="QueryVgUnitId">					<option value="0"></option>					<option value="1">普通单位</option>					<option value="2">触发单位</option>				</select>			</div>			<div class="input select">				<label for="QueryVgExpansionId"  class="VGFieldNameLabel">卡包</label><select					name="data[Query][expansion_id]" id="QueryVgExpansionId">					<option value="0"></option>					<option value="1">PRカード</option>					<option value="2">KAD1&amp;2-フラッシュファイトスターターセット</option>					<option value="3">TD01-聖域の光剣士</option>					<option value="4">TD02-帝国の暴竜</option>					<option value="5">BT01-騎士王降臨</option>					<option value="6">BT02-竜魂乱舞</option>					<option value="7">KAD3&amp;4-フラッシュファイトスターターセット第2弾</option>					<option value="8">TD03-黄金の機兵</option>					<option value="9">TD04-桜花の姫巫女</option>					<option value="10">BT03-魔侯襲来</option>					<option value="11">BT04-虚影神蝕</option>					<option value="12">EB01-コミックスタイル vol.1</option>					<option value="13">BT05-双剣覚醒</option>					<option value="14">EB02-歌姫の饗宴</option>					<option value="15">TD05-銀狼の爪撃</option>					<option value="16">TD06-雷竜の鳴動</option>					<option value="17">BT06-極限突破</option>					<option value="18">KAD5-ヴァンガード スターターセット</option>					<option value="19">EB03-黒鋼の戦騎</option>					<option value="20">BT07-獣王爆進</option>					<option value="21">TD07-海皇の末裔</option>					<option value="22">BT08-蒼嵐艦隊</option>					<option value="23">EB04-無幻の兵団</option>					<option value="24">EB05-神託の戦乙女</option>					<option value="25">BT09-竜騎激突</option>				</select>			</div>			<div class="input select">				<label class="VGFieldNameLabel">等级</label>				<select name="data[Query][grade_min]" id="QueryVgGradeMin">					<option value="0"></option>					<option value="1">3</option>					<option value="2">2</option>					<option value="3">1</option>					<option value="4">0</option>					<option value="5">4</option>				</select> ~ <select name="data[Query][grade_max]"					id="QueryVgGradeMax">					<option value="0"></option>					<option value="1">3</option>					<option value="2">2</option>					<option value="3">1</option>					<option value="4">0</option>					<option value="5">4</option>				</select>			</div>			<div class="input select">				<label class="VGFieldNameLabel">力量</label>				<select name="data[Query][power_min]" id="QueryVgPowerMin">					<option value="0"></option>					<option value="1">0</option>					<option value="2">1000</option>					<option value="3">2000</option>					<option value="4">3000</option>					<option value="5">4000</option>					<option value="6">5000</option>					<option value="7">6000</option>					<option value="8">7000</option>					<option value="9">8000</option>					<option value="10">9000</option>					<option value="11">10000</option>					<option value="12">11000</option>					<option value="13">12000</option>					<option value="14">13000</option>				</select> ~ <select name="data[Query][power_max]"					id="QueryVgPowerMax">					<option value="0"></option>					<option value="1">0</option>					<option value="2">1000</option>					<option value="3">2000</option>					<option value="4">3000</option>					<option value="5">4000</option>					<option value="6">5000</option>					<option value="7">6000</option>					<option value="8">7000</option>					<option value="9">8000</option>					<option value="10">9000</option>					<option value="11">10000</option>					<option value="12">11000</option>					<option value="13">12000</option>					<option value="14">13000</option>				</select>			</div>			<div class="input select">				<label class="VGFieldNameLabel">盾护</label>				<select name="data[Query][shield_min]" id="QueryVgShieldMin">					<option value="0"></option>					<option value="1">-</option>					<option value="2">0</option>					<option value="3">5000</option>					<option value="4">10000</option>				</select> ~ <select name="data[Query][shield_max]"					id="QueryVgShieldMax">					<option value="0"></option>					<option value="1">-</option>					<option value="2">0</option>					<option value="3">5000</option>					<option value="4">10000</option>				</select>			</div>			<div class="input select">				<label class="VGFieldNameLabel">☆</label>				<select name="data[Query][critical_min]" id="QueryVgCriticalMin">					<option value="0"></option>					<option value="1">1</option>					<option value="2">2</option>					<option value="3">3</option>				</select> ~ <select name="data[Query][critical_max]"					id="QueryVgCriticalMax">					<option value="0"></option>					<option value="1">1</option>					<option value="2">2</option>					<option value="3">3</option>				</select>			</div>			<div class="input select">				<label for="QueryVgTriggerId" class="VGFieldNameLabel">触发</label><select					name="data[Query][trigger_id]" id="QueryVgTriggerId">					<option value="0"></option>					<option value="1">-</option>					<option value="2">醒</option>					<option value="3">治</option>					<option value="4">引</option>					<option value="5">☆</option>				</select>			</div>			<div class="input select">				<label for="QueryVgNationId" class="VGFieldNameLabel">国家</label><select					name="data[Query][nation_id]" id="QueryVgNationId">					<option value="0"></option>					<option value="1">圣域联合王国/ユナイテッド·サンクチュアリ</option>					<option value="2">龙族帝国/ドラゴン·エンパイア</option>					<option value="3">暗域/ダーク・ゾーン</option>					<option value="4">星门/スター・ゲート</option>					<option value="5">祖/ズー</option>					<option value="6">未知南陆/メガラニカ</option>				</select>			</div>			<div class="input select">				<label for="QueryVgClanId" class="VGFieldNameLabel">集团</label><select					name="data[Query][clan_id]" id="QueryVgClanId">					<option value="0"></option>				</select>			</div>			<div class="input select">				<label for="QueryVgRarityId" class="VGFieldNameLabel">罕见度</label><select					name="data[Query][rarity_id]" id="QueryVgRarityId">					<option value="0"></option>					<option value="1">RRR</option>					<option value="2">RR</option>					<option value="3">R</option>					<option value="4">C</option>					<option value="5">SP</option>					<option value="6">PR</option>					<option value="7">TD</option>					<option value="8">KAD</option>				</select>			</div>			<div class="input select">				<label for="QueryVgRaceId" class="VGFieldNameLabel">种族</label><select					name="data[Query][race_id]" id="QueryVgRaceId">					<option value="0"></option>					<option value="1">深渊龙/アビスドラゴン</option>					<option value="2">昆虫/インセクト</option>					<option value="3">吸血鬼/ヴァンパイア</option>					<option value="4">翼龙/ウィングドラゴン</option>					<option value="5">外星人/エイリアン</option>					<option value="6">精灵/エルフ</option>					<option value="7">天使/エンジェル</option>					<option value="8">食人魔/オーガ</option>					<option value="9">半鱼人/ギルマン</option>					<option value="10">幽灵/ゴースト</option>					<option value="11">宇宙龙/コスモドラゴン</option>					<option value="12">哥布林/ゴブリン</option>					<option value="13">女梦魔/サキュバス</option>					<option value="14">火精灵/サラマンダー</option>					<option value="15">巨人/ジャイアント</option>					<option value="16">影龙/シャドードラゴン</option>					<option value="17">风精灵/シルフ</option>					<option value="18">骨骸/スケルトン</option>					<option value="19">僵尸/ゾンビ</option>					<option value="20">恶魔/デーモン</option>					<option value="21">恐暴龙/ディノドラゴン</option>					<option value="22">龙人/ドラゴンマン</option>					<option value="23">贵族/ノーブル</option>					<option value="24">地精灵/ノーム</option>					<option value="25">高等兽/ハイビースト</option>					<option value="26">战斗机器人/バトロイド</option>					<option value="27">人类/ヒューマン</option>					<option value="28">炎龙/フレイムドラゴン</option>					<option value="29">人鱼/マーメイド</option>					<option value="30">作业机器人/ワーカロイド</option>					<option value="31">战斗兽/ワービースト</option>					<option value="32">合成兽/キメラ</option>					<option value="33">泪龙/ティアードラゴン</option>					<option value="34">海怪/クラーケン</option>					<option value="35">魔像/ゴーレム</option>					<option value="36">生化机器人/バイオロイド</option>					<option value="37">树精灵/ドリアード</option>					<option value="38">森林龙/フォレストドラゴン</option>					<option value="39">雷龙/サンダードラゴン</option>					<option value="40">水用机器人/アクアロイド</option>				</select>			</div>			<div class="input select">				<label for="QueryVgSkillId" class="VGFieldNameLabel">技能</label><select					name="data[Query][skill_id]" id="QueryVgSkillId">					<option value="0"></option>					<option value="1">双判</option>					<option value="2">截击</option>					<option value="3">支援</option>				</select>			</div>			<div class="input select">				<label for="QueryVgTag" class="VGFieldNameLabel">标签</label><input type="hidden"					name="data[Query][tag]" value="" id="QueryVgTag_" /> <select					name="data[Query][tag][]" multiple="multiple" id="QueryVgTag">					<option value="1">退场相关</option>					<option value="2">重置相关</option>					<option value="3">重置限制</option>					<option value="4">防御限制</option>					<option value="5">手牌丢弃</option>					<option value="7">力量提高</option>					<option value="8">护盾提高</option>					<option value="9">伤害提高</option>					<option value="10">截击盾</option>					<option value="11">必闪盾</option>					<option value="12">充魂盾</option>					<option value="13">特殊RIDE</option>					<option value="14">特殊CALL</option>					<option value="15">抽牌相关</option>					<option value="16">检索相关</option>					<option value="17">充魂相关</option>					<option value="18">回费相关</option>					<option value="19">墓地相关</option>					<option value="20">返回卡组</option>					<option value="21">卡片回手</option>					<option value="22">查看牌顶</option>					<option value="23">8魂5费</option>					<option value="24">攻击后列</option>					<option value="25">灵魂消耗</option>					<option value="26">指定灵魂</option>					<option value="27">拘束</option>					<option value="28">横置相关</option>					<option value="29">力量降低</option>					<option value="30">力量指定</option>					<option value="31">等级指定</option>					<option value="32">支援相关</option>					<option value="33">极限突破</option>					<option value="34">血区相关</option>					<option value="36">人格爆破</option>					<option value="37">复数攻击</option>					<option value="38">封锁相关</option>					<option value="39">战斗次数</option>				</select>			</div>			<div class="submit">				<input type="submit" value="カード検索" />			</div>		</form>	</div></div><div class="wrap">	<div id="icon-users" class="icon32">		<br />	</div>	<h2>所有卡片</h2>	<?php $table->description(); ?>	<form id="movies-filter" method="get">		<!-- For plugins, we also need to ensure that the form posts back to our current page -->		<input type="hidden" name="page"			value="<?php echo $_REQUEST['page'] ?>" />		<?php $table->display() ?>	</form></div><?php }?><?php function vg_card_view_page($id) {	global $wpdb;	$query = "SELECT "	."`Cards`.`id` AS `id`, "	."`Cards`.`title`, "	."`subtitle`, `serial`, `popular_name`, `unittype`, `grade`, `power`, `shield`, `critical`, `trigger`, `skill`, `effect`, `flavor_text`, `illustrator`, `remark`, "	."`Races`.`title` AS `race`, "	."`Rarities`.`title` AS `rarity`, "	."`Expansions`.`title` AS `expansion`, "	."`Clans`.`title` AS `clan`, "	."`Nations`.`title` AS `nation` "	." FROM `" .$wpdb->prefix . "plugin_vgcardutils_cards` AS `Cards`"	."LEFT JOIN ".$wpdb->prefix . "plugin_vgcardutils_races"." AS `Races` ON (`race_id` = `Races`.`id`) "	."LEFT JOIN ".$wpdb->prefix . "plugin_vgcardutils_rarities"." AS `Rarities` ON (`rarity_id` = `Rarities`.`id`) "	."LEFT JOIN ".$wpdb->prefix . "plugin_vgcardutils_expansions"." AS `Expansions` ON (`expansion_id` = `Expansions`.`id`) "	."LEFT JOIN ".$wpdb->prefix . "plugin_vgcardutils_clans"." AS `Clans` ON (`clan_id` = `Clans`.`id`) "	."LEFT JOIN ".$wpdb->prefix . "plugin_vgcardutils_nations"." AS `Nations` ON (`Clans`.`nation_id` = `Nations`.`id`) "	."WHERE `Cards`.`id` = %d "	.'LIMIT 1';	$result = $wpdb->get_row($wpdb->prepare($query,array('%d'=>$id)));	?><div class="wrap">	<div id="icon-plugins" class="icon32">		<br>	</div>	<h2>查看</h2>	<div>		<div style="float: left;">			<img class="VGCardIMG"				src="<?php echo plugin_dir_url(__FILE__)."img/cards/default-image-350x510.jpg"?>"				alt="" />		</div>		<div class="VGFields">			<p>									<p class="VGFieldName">序列号</p>			<p class="VGFieldValue">				<?php echo $result->serial ?>			</p>			</p>			<p>									<p class="VGFieldName">卡名</p>			<p class="VGFieldValue">				<?php echo $result->title; ?>			</p>			</p>			<p>									<p class="VGFieldName">副卡名</p>			<p class="VGFieldValue">				<?php echo $result->subtitle; ?>			</p>			</p>			<p>									<p class="VGFieldName">俗称</p>			<p class="VGFieldValue">				<?php echo $result->popular_name; ?>			</p>			</p>			<p>									<p class="VGFieldName">单位类型</p>			<p class="VGFieldValue">				<?php global $__VGUnittypeEnum__; echo $__VGUnittypeEnum__[$result->unittype]; ?>			</p>			</p>			<p>									<p class="VGFieldName">卡包</p>			<p class="VGFieldValue">				<?php echo $result->expansion; ?>			</p>			</p>			<p>									<p class="VGFieldName">等级</p>			<p class="VGFieldValue">				<?php global $__VGGradeEnum__; echo $__VGGradeEnum__[$result->grade]; ?>			</p>			</p>			<p>									<p class="VGFieldName">力量</p>			<p class="VGFieldValue">				<?php global $__VGPowerEnum__; echo $__VGPowerEnum__[$result->power]; ?>			</p>			</p>			<p>									<p class="VGFieldName">盾护</p>			<p class="VGFieldValue">				<?php global $__VGShieldEnum__; echo $__VGShieldEnum__[$result->shield]; ?>			</p>			</p>			<p>									<p class="VGFieldName">☆</p>			<p class="VGFieldValue">				<?php global $__VGCriticalEnum__; echo $__VGCriticalEnum__[$result->critical]; ?>			</p>			</p>			<p>									<p class="VGFieldName">触发</p>			<p class="VGFieldValue">				<?php global $__VGTriggerEnum__; echo $__VGTriggerEnum__[$result->trigger]; ?>			</p>			</p>			<p>									<p class="VGFieldName">国家</p>			<p class="VGFieldValue">				<?php echo $result->nation; ?>			</p>			</p>			<p>									<p class="VGFieldName">集团</p>			<p class="VGFieldValue">				<?php echo $result->clan; ?>			</p>			</p>			<p>									<p class="VGFieldName">罕见度</p>			<p class="VGFieldValue">				<?php echo $result->rarity; ?>			</p>			</p>			<p>									<p class="VGFieldName">种族</p>			<p class="VGFieldValue">				<?php echo $result->race; ?>			</p>			</p>			<p>									<p class="VGFieldName">技能</p>			<p class="VGFieldValue">				<?php global $__VGSkillEnum__; echo $__VGSkillEnum__[$result->skill]; ?>			</p>			</p>			<p>									<p class="VGFieldName">特效</p>			<p class="VGFieldValue">				<?php echo $result->effect; ?>			</p>			</p>			<p>									<p class="VGFieldName">台词</p>			<p class="VGFieldValue">				<?php echo $result->flavor_text; ?>			</p>			</p>			<p>									<p class="VGFieldName">画师</p>			<p class="VGFieldValue">				<?php echo $result->illustrator; ?>			</p>			</p>			<p>									<p class="VGFieldName">备注</p>			<p class="VGFieldValue">				<?php echo $result->remark; ?>			</p>			</p>		</div>	</div></div><?php }?>