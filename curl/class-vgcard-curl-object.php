<?phpif(!class_exists('WP_VG_CURLObject')){	require_once plugin_dir_path(__FILE__).'class-curl-object.php';}class VgCard_CURLObject extends WP_VG_CURLObject {	public static $OptionName = 'vgcardutils_db_table_cards_version';	public static $Name = 'plugin_vgcardutils_cards';	public static $Prefix = "vgc";		function __construct(){			}	//Create cards table	public function create(){	//Get the table name with the WP database prefix	global $wpdb;	$table_name = $wpdb->prefix . self::$Name;	global $vgcardutils_db_table_cards_version;	$installed_ver = get_option( self::$OptionName );	//Check if the table already exists and if the table is up to date, if not create it	if($wpdb->get_var("SHOW TABLES LIKE '$table_name'") != $table_name		||  $installed_ver != $vgcardutils_db_table_cards_version ) {		$sql = "CREATE TABLE " . $table_name . " (		`id` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'id' ,		`serial` VARCHAR(45) NOT NULL ,		`title` VARCHAR(45) NOT NULL COMMENT '卡牌名称' ,		`subtitle` VARCHAR(255) NOT NULL ,		`popular_name` VARCHAR(255) NOT NULL ,		`unittype` INT(11) NOT NULL ,		`expansion_id` INT(11) NOT NULL ,		`grade` INT(11) NOT NULL COMMENT '等级' ,		`power` INT(11) NOT NULL COMMENT '能力' ,		`shield` INT(11) NOT NULL COMMENT '盾护' ,		`critical` INT(11) NOT NULL COMMENT '会心' ,		`trigger` INT(11) NOT NULL COMMENT '触发',		`clan_id` INT(11) NOT NULL COMMENT '集团' ,		`rarity_id` INT(11) NOT NULL ,		`race_id` INT(11) NOT NULL COMMENT '种族' ,		`skill` INT(11) NOT NULL COMMENT '技能描述' ,		`effect` TEXT NOT NULL COMMENT '特技' ,		`flavor_text` VARCHAR(255) NOT NULL ,		`illustrator` VARCHAR(45) NOT NULL ,		`remark` TEXT NOT NULL ,		PRIMARY KEY (`id`) ,		UNIQUE INDEX `card_no_UNIQUE` (`serial` ASC)		)AUTO_INCREMENT=945;";		require_once(ABSPATH . 'wp-admin/includes/upgrade.php');		dbDelta($sql);		update_option(self::$OptionName, $vgcardutils_db_table_cards_version );	}	//Add database table versions to options	add_option(self::$OptionName, $vgcardutils_db_table_cards_version);}	/**	 * 	 * @return mixed Database query results	 * @param int $current_page	 * @param int $per_page	 */	public function listItem($current_page, $per_page) {		global $wpdb;		$query = "SELECT "		."`Cards`.`id` AS `id`, "		."`Cards`.`title`, "		."`subtitle`, `serial`, "		."`Rarities`.`title` AS `rarity`, "		."`Expansions`.`title` AS `expansion`, "		."`Clans`.`title` AS `clan`, "		."`Nations`.`title` AS `nation` "		." FROM `" .$wpdb->prefix . self::$Name. "` AS `Cards`"		."LEFT JOIN ".$wpdb->prefix . "plugin_vgcardutils_rarities"." AS `Rarities` ON (`rarity_id` = `Rarities`.`id`) "		."LEFT JOIN ".$wpdb->prefix . "plugin_vgcardutils_expansions"." AS `Expansions` ON (`expansion_id` = `Expansions`.`id`) "		."LEFT JOIN ".$wpdb->prefix . "plugin_vgcardutils_clans"." AS `Clans` ON (`clan_id` = `Clans`.`id`) "		."LEFT JOIN ".$wpdb->prefix . "plugin_vgcardutils_nations"." AS `Nations` ON (`Clans`.`nation_id` = `Nations`.`id`) "		.'LIMIT '.$per_page		.' OFFSET ' . $current_page * $per_page;		//		echo $query;		return $wpdb->get_results($query);	}		public function counts() {		global $wpdb;		$count = $wpdb->get_row("SELECT count(*) AS `count` FROM `" .$wpdb->prefix . self::$Name. "`");		return $count->count;	}}